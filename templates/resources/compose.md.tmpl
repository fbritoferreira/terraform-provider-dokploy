---
page_title: "{{.Name}} {{.Type}} - {{.ProviderName}}"
subcategory: ""
description: |-
  Manages a Docker Compose stack in Dokploy.
---

# {{.Name}} ({{.Type}})

Manages a Docker Compose stack in Dokploy. Deploy multi-container applications using docker-compose files from various sources:
- **Raw** - Inline docker-compose.yml content
- **GitHub** - Deploy from GitHub repositories using GitHub Apps
- **GitLab** - Deploy from GitLab repositories
- **Bitbucket** - Deploy from Bitbucket repositories
- **Gitea** - Deploy from self-hosted Gitea instances
- **Custom Git** - Deploy from any Git repository via SSH or HTTPS

## Example Usage

### Inline Compose File (Raw)

Deploy a compose stack with inline docker-compose.yml content.

```terraform
resource "dokploy_project" "myproject" {
  name = "My Stack"
}

resource "dokploy_environment" "production" {
  project_id  = dokploy_project.myproject.id
  name        = "Production"
  description = "Production environment"
}

resource "dokploy_compose" "wordpress" {
  name           = "wordpress-stack"
  environment_id = dokploy_environment.production.id
  source_type    = "raw"
  
  compose_file_content = <<-EOT
    version: '3.8'
    services:
      wordpress:
        image: wordpress:latest
        ports:
          - "8080:80"
        environment:
          WORDPRESS_DB_HOST: db:3306
          WORDPRESS_DB_USER: wordpress
          WORDPRESS_DB_PASSWORD: wordpress_password
          WORDPRESS_DB_NAME: wordpress
        depends_on:
          - db
          
      db:
        image: mysql:8.0
        environment:
          MYSQL_DATABASE: wordpress
          MYSQL_USER: wordpress
          MYSQL_PASSWORD: wordpress_password
          MYSQL_ROOT_PASSWORD: root_password
        volumes:
          - db_data:/var/lib/mysql
          
    volumes:
      db_data:
  EOT
  
  deploy_on_create = true
}
```

### GitHub Repository

Deploy a compose stack from a GitHub repository.

```terraform
resource "dokploy_compose" "github_stack" {
  name           = "my-stack"
  environment_id = dokploy_environment.production.id
  source_type    = "github"
  
  # GitHub settings
  github_id    = "your-github-app-installation-id"
  owner        = "myorg"
  repository   = "docker-stack"
  branch       = "main"
  compose_path = "./docker-compose.yml"
  
  auto_deploy      = true
  deploy_on_create = true
}
```

### GitLab Repository

```terraform
resource "dokploy_compose" "gitlab_stack" {
  name           = "gitlab-stack"
  environment_id = dokploy_environment.production.id
  source_type    = "gitlab"
  
  # GitLab settings
  gitlab_id         = "your-gitlab-integration-id"
  gitlab_project_id = 12345
  gitlab_owner      = "mygroup"
  gitlab_repository = "docker-stack"
  gitlab_branch     = "main"
  compose_path      = "./docker-compose.yml"
  
  auto_deploy      = true
  deploy_on_create = true
}
```

### Bitbucket Repository

```terraform
resource "dokploy_compose" "bitbucket_stack" {
  name           = "bitbucket-stack"
  environment_id = dokploy_environment.production.id
  source_type    = "bitbucket"
  
  # Bitbucket settings
  bitbucket_id         = "your-bitbucket-integration-id"
  bitbucket_owner      = "myworkspace"
  bitbucket_repository = "docker-stack"
  bitbucket_branch     = "main"
  compose_path         = "./docker-compose.yml"
  
  auto_deploy      = true
  deploy_on_create = true
}
```

### Gitea Repository

```terraform
resource "dokploy_compose" "gitea_stack" {
  name           = "gitea-stack"
  environment_id = dokploy_environment.production.id
  source_type    = "gitea"
  
  # Gitea settings
  gitea_id         = "your-gitea-integration-id"
  gitea_owner      = "myorg"
  gitea_repository = "docker-stack"
  gitea_branch     = "main"
  compose_path     = "./docker-compose.yml"
  
  auto_deploy      = true
  deploy_on_create = true
}
```

### Custom Git Repository (SSH)

Deploy from a private Git repository using SSH authentication.

```terraform
resource "dokploy_ssh_key" "deploy_key" {
  name        = "compose-deploy-key"
  private_key = var.ssh_private_key
  public_key  = var.ssh_public_key
}

resource "dokploy_compose" "private_stack" {
  name           = "private-stack"
  environment_id = dokploy_environment.production.id
  source_type    = "git"
  
  # Custom Git settings
  custom_git_url        = "git@github.com:myorg/private-stack.git"
  custom_git_branch     = "main"
  custom_git_ssh_key_id = dokploy_ssh_key.deploy_key.id
  compose_path          = "./docker-compose.yml"
  enable_submodules     = true
  
  auto_deploy      = true
  deploy_on_create = true
}
```

### Compose with Environment Variables

```terraform
resource "dokploy_compose" "with_env" {
  name           = "env-stack"
  environment_id = dokploy_environment.production.id
  source_type    = "github"
  
  github_id    = "your-github-app-installation-id"
  owner        = "myorg"
  repository   = "my-stack"
  branch       = "main"
  compose_path = "./docker-compose.yml"
  
  # Environment variables available to compose file
  env = <<-EOT
    DATABASE_URL=postgresql://user:pass@db:5432/app
    REDIS_URL=redis://redis:6379
    SECRET_KEY=${var.secret_key}
  EOT
  
  auto_deploy      = true
  deploy_on_create = true
}
```

### Compose on Specific Server

Deploy to a specific server in your cluster.

```terraform
resource "dokploy_compose" "server_specific" {
  name           = "server-stack"
  environment_id = dokploy_environment.production.id
  source_type    = "raw"
  server_id      = dokploy_server.worker.id
  
  compose_file_content = <<-EOT
    version: '3.8'
    services:
      worker:
        image: myworker:latest
        deploy:
          replicas: 3
  EOT
  
  deploy_on_create = true
}
```

{{ .SchemaMarkdown | trimspace }}

## Import

Import is supported using the following syntax:

```shell
terraform import dokploy_compose.wordpress "compose-id-123"
```
