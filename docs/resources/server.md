---
page_title: "dokploy_server Resource - dokploy"
subcategory: ""
description: |-
  Manages a remote server for Dokploy deployments or builds.
---

# dokploy_server (Resource)

Manages a remote server for Dokploy deployments or builds. Servers can be used to deploy applications to remote machines or as dedicated build servers.

## Example Usage

### Basic Deploy Server

```terraform
# First, create an SSH key for server authentication
resource "dokploy_ssh_key" "deploy_key" {
  name        = "deploy-server-key"
  description = "SSH key for deployment server"
  # Dokploy will auto-generate the key pair
}

# Create a deployment server
resource "dokploy_server" "production" {
  name        = "production-server"
  description = "Production deployment server"
  ip_address  = "192.168.1.100"
  port        = 22
  username    = "deploy"
  ssh_key_id  = dokploy_ssh_key.deploy_key.id
  server_type = "deploy"
}
```

### Build Server

```terraform
# Create a dedicated build server
resource "dokploy_server" "build" {
  name        = "build-server"
  description = "Dedicated server for building Docker images"
  ip_address  = "192.168.1.101"
  port        = 22
  username    = "builder"
  ssh_key_id  = dokploy_ssh_key.build_key.id
  server_type = "build"
}
```

### Server with Custom SSH Port

```terraform
resource "dokploy_server" "secure" {
  name        = "secure-server"
  description = "Server with non-standard SSH port"
  ip_address  = "10.0.0.50"
  port        = 2222
  username    = "admin"
  ssh_key_id  = dokploy_ssh_key.admin_key.id
  server_type = "deploy"
}
```

### Multiple Servers for Different Environments

```terraform
# Staging server
resource "dokploy_server" "staging" {
  name        = "staging-server"
  description = "Staging environment server"
  ip_address  = var.staging_server_ip
  port        = 22
  username    = "deploy"
  ssh_key_id  = dokploy_ssh_key.deploy_key.id
  server_type = "deploy"
}

# Production server
resource "dokploy_server" "production" {
  name        = "production-server"
  description = "Production environment server"
  ip_address  = var.production_server_ip
  port        = 22
  username    = "deploy"
  ssh_key_id  = dokploy_ssh_key.deploy_key.id
  server_type = "deploy"
}

# Deploy application to specific server
resource "dokploy_application" "api" {
  project_id     = dokploy_project.main.id
  environment_id = dokploy_environment.production.id
  name           = "api"
  source_type    = "docker"
  docker_image   = "myapp/api:latest"
  server_id      = dokploy_server.production.id
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `ip_address` (String) IP address of the server.
- `name` (String) Name of the server.
- `port` (Number) SSH port of the server.
- `server_type` (String) Type of server: 'deploy' or 'build'.
- `ssh_key_id` (String) ID of the SSH key to use for authentication.
- `username` (String) SSH username for connecting to the server.

### Optional

- `command` (String) Custom command to run on the server.
- `description` (String) Description of the server.

### Read-Only

- `id` (String) Unique identifier for the server.
- `server_status` (String) Current status of the server.

## Import

Import is supported using the following syntax:

```shell
# Servers can be imported using their ID
terraform import dokploy_server.production "server-id-123"
```

## Notes

- Before creating a server, ensure the SSH key is added to the remote server's `~/.ssh/authorized_keys` file.
- The server must have Docker installed and the specified user must have permission to run Docker commands.
- For build servers, ensure sufficient disk space and CPU resources for building Docker images.
