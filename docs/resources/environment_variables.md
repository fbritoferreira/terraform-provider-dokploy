---
page_title: "dokploy_environment_variables Resource - dokploy"
subcategory: ""
description: |-
  Manages all environment variables for a Dokploy application as a single resource.
---

# dokploy_environment_variables (Resource)

Manages all environment variables for a Dokploy application as a single resource. This resource replaces all environment variables for the application, providing a declarative way to manage configuration.

## Example Usage

### Basic Environment Variables

```terraform
resource "dokploy_application" "myapp" {
  name         = "myapp"
  project_id   = dokploy_project.myproject.id
  source_type  = "docker"
  docker_image = "myorg/myapp:latest"
}

resource "dokploy_environment_variables" "myapp_env" {
  application_id = dokploy_application.myapp.id
  
  variables = {
    NODE_ENV     = "production"
    PORT         = "3000"
    LOG_LEVEL    = "info"
  }
}
```

### Database Connection Variables

```terraform
resource "dokploy_database" "postgres" {
  name              = "mydb"
  project_id        = dokploy_project.myproject.id
  type              = "postgres"
  docker_image      = "postgres:16"
  database_name     = "myapp"
  database_user     = "myapp"
  database_password = "secretpassword"
}

resource "dokploy_application" "api" {
  name         = "api"
  project_id   = dokploy_project.myproject.id
  source_type  = "docker"
  docker_image = "myorg/api:latest"
}

resource "dokploy_environment_variables" "api_env" {
  application_id = dokploy_application.api.id
  
  variables = {
    DATABASE_URL = "postgresql://myapp:secretpassword@${dokploy_database.postgres.app_name}:5432/myapp"
    NODE_ENV     = "production"
  }
}
```

### Using Terraform Variables for Secrets

```terraform
variable "api_secret_key" {
  type        = string
  sensitive   = true
  description = "Secret key for the API"
}

variable "stripe_api_key" {
  type        = string
  sensitive   = true
  description = "Stripe API key"
}

resource "dokploy_environment_variables" "app_env" {
  application_id = dokploy_application.myapp.id
  
  variables = {
    NODE_ENV        = "production"
    SECRET_KEY      = var.api_secret_key
    STRIPE_API_KEY  = var.stripe_api_key
    PUBLIC_URL      = "https://myapp.example.com"
  }
}
```

### With .env File Creation

```terraform
resource "dokploy_environment_variables" "app_env" {
  application_id  = dokploy_application.myapp.id
  create_env_file = true
  
  variables = {
    # These will be written to a .env file in the container
    DATABASE_HOST     = "db.internal"
    DATABASE_PORT     = "5432"
    DATABASE_NAME     = "myapp"
    DATABASE_USER     = "myapp"
    DATABASE_PASSWORD = "secretpassword"
    REDIS_URL         = "redis://redis:6379"
  }
}
```

### Full Stack Example

```terraform
resource "dokploy_project" "fullstack" {
  name = "Full Stack App"
}

resource "dokploy_database" "postgres" {
  name              = "postgres"
  project_id        = dokploy_project.fullstack.id
  type              = "postgres"
  docker_image      = "postgres:16"
  database_name     = "app"
  database_user     = "app"
  database_password = "dbpassword123"
}

resource "dokploy_redis" "cache" {
  name           = "redis-cache"
  project_id     = dokploy_project.fullstack.id
  docker_image   = "redis:7-alpine"
}

resource "dokploy_application" "backend" {
  name         = "backend"
  project_id   = dokploy_project.fullstack.id
  source_type  = "docker"
  docker_image = "myorg/backend:latest"
}

resource "dokploy_environment_variables" "backend_env" {
  application_id = dokploy_application.backend.id
  
  variables = {
    NODE_ENV     = "production"
    PORT         = "3000"
    DATABASE_URL = "postgresql://app:dbpassword123@${dokploy_database.postgres.app_name}:5432/app"
    REDIS_URL    = "redis://${dokploy_redis.cache.app_name}:6379"
    JWT_SECRET   = "your-jwt-secret-here"
    LOG_LEVEL    = "info"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `application_id` (String) The ID of the application to manage environment variables for.
- `variables` (Map of String, Sensitive) A map of environment variable names to values. All values are treated as sensitive.

### Optional

- `create_env_file` (Boolean) If true, creates a .env file in the application container with the environment variables.

### Read-Only

- `id` (String) The ID of this resource.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
# Environment variables can be imported using the application ID
terraform import dokploy_environment_variables.myapp_env "application-id-123"
```

~> **Note:** When importing, the current environment variables from the application will be imported into the state. Any variables not in your configuration will be removed on the next apply.
