---
page_title: "dokploy_database Resource - dokploy"
subcategory: ""
description: |-
  Manages a database instance in Dokploy.
---

# dokploy_database (Resource)

Manages a database instance in Dokploy. Supports PostgreSQL, MySQL, MariaDB, and MongoDB databases.

## Example Usage

### PostgreSQL Database

```terraform
resource "dokploy_project" "main" {
  name        = "my-project"
  description = "Main project"
}

resource "dokploy_environment" "production" {
  project_id = dokploy_project.main.id
  name       = "production"
}

resource "dokploy_database" "postgres" {
  project_id     = dokploy_project.main.id
  environment_id = dokploy_environment.production.id
  name           = "app-database"
  type           = "postgres"
  password       = var.db_password
  version        = "16"
}
```

### MySQL Database

```terraform
resource "dokploy_database" "mysql" {
  project_id     = dokploy_project.main.id
  environment_id = dokploy_environment.production.id
  name           = "mysql-database"
  type           = "mysql"
  password       = var.mysql_password
  version        = "8"
}
```

### MariaDB Database

```terraform
resource "dokploy_database" "mariadb" {
  project_id     = dokploy_project.main.id
  environment_id = dokploy_environment.production.id
  name           = "mariadb-database"
  type           = "mariadb"
  password       = var.mariadb_password
  version        = "10"
}
```

### MongoDB Database

```terraform
resource "dokploy_database" "mongo" {
  project_id     = dokploy_project.main.id
  environment_id = dokploy_environment.production.id
  name           = "mongo-database"
  type           = "mongo"
  password       = var.mongo_password
  version        = "7"
}
```

### Database with Application

```terraform
resource "dokploy_project" "webapp" {
  name = "web-application"
}

resource "dokploy_environment" "prod" {
  project_id = dokploy_project.webapp.id
  name       = "production"
}

resource "dokploy_database" "postgres" {
  project_id     = dokploy_project.webapp.id
  environment_id = dokploy_environment.prod.id
  name           = "app-db"
  type           = "postgres"
  password       = var.db_password
  version        = "16"
}

resource "dokploy_application" "api" {
  project_id     = dokploy_project.webapp.id
  environment_id = dokploy_environment.prod.id
  name           = "api-server"
  source_type    = "docker"
  docker_image   = "myapp/api:latest"
  
  env = <<-EOT
    DATABASE_URL=postgresql://postgres:${var.db_password}@${dokploy_database.postgres.name}:5432/postgres
  EOT
}
```

### Multiple Databases

```terraform
# Main application database
resource "dokploy_database" "main" {
  project_id     = dokploy_project.webapp.id
  environment_id = dokploy_environment.prod.id
  name           = "main-db"
  type           = "postgres"
  password       = var.main_db_password
  version        = "16"
}

# Analytics database
resource "dokploy_database" "analytics" {
  project_id     = dokploy_project.webapp.id
  environment_id = dokploy_environment.prod.id
  name           = "analytics-db"
  type           = "postgres"
  password       = var.analytics_db_password
  version        = "16"
}

# Session store
resource "dokploy_database" "sessions" {
  project_id     = dokploy_project.webapp.id
  environment_id = dokploy_environment.prod.id
  name           = "sessions-db"
  type           = "mongo"
  password       = var.sessions_db_password
  version        = "7"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `environment_id` (String) ID of the environment to deploy the database in.
- `name` (String) Name of the database.
- `password` (String, Sensitive) Password for the database.
- `project_id` (String) ID of the project this database belongs to.
- `type` (String) Database type: 'postgres', 'mysql', 'mariadb', or 'mongo'.

### Optional

- `version` (String) Database version (e.g., '16' for PostgreSQL, '8' for MySQL).

### Read-Only

- `external_port` (Number) External port if exposed.
- `id` (String) The ID of this resource.
- `internal_port` (Number) Internal port within the Docker network.

## Import

Import is supported using the following syntax:

```shell
# Databases can be imported using their ID
terraform import dokploy_database.postgres "database-id-123"
```

## Supported Database Types and Versions

| Type | Supported Versions |
|------|-------------------|
| postgres | 12, 13, 14, 15, 16 |
| mysql | 5.7, 8 |
| mariadb | 10, 11 |
| mongo | 4, 5, 6, 7 |

## Notes

- Database passwords should be stored securely using Terraform variables or a secrets manager.
- Internal ports are automatically assigned by Dokploy.
- To connect from applications in the same environment, use the database name as the hostname.
- External ports are only available if explicitly configured in the Dokploy dashboard.
